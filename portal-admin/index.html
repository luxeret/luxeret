<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>어드민 패널</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="wrapper">
        <!-- 사이드바 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>어드민 패널</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <!-- 로그인 정보와 로그아웃 버튼을 표시할 영역 -->
                    <li id="userNameDisplay">로그인되지 않음</li>
                    <li id="loginTime"></li>
                    <li><button id="logoutButton" style="display:none;">로그아웃</button></li>
                </ul>
            </nav>
        </aside>

        <!-- 메인 컨텐츠 -->
        <main class="content">
            <section id="schedule" class="card">
                <h3>주요일정 입력</h3>
                <form id="scheduleForm">
                    <div class="input-group">
                        <label for="scheduleTitle">일정 제목:</label>
                        <input type="text" id="scheduleTitle" name="title" placeholder="일정 제목을 입력하세요" required>
                    </div>

                    <div class="input-group">
                        <label for="scheduleDate">일정 날짜:</label>
                        <input type="date" id="scheduleDate" name="date" required>
                    </div>

                    <div class="input-group">
                        <label for="scheduleDescription">상세 내용:</label>
                        <textarea id="scheduleDescription" name="description" placeholder="일정에 대한 자세한 내용을 입력하세요" required></textarea>
                    </div>

                    <button type="submit">주요일정 전송</button>
                </form>
            </section>

            <section id="projects" class="card">
                <h3>프로젝트 입력</h3>
                <form id="projectForm">
                    <div class="input-group">
                        <label for="projectTitle">프로젝트 제목:</label>
                        <input type="text" id="projectTitle" name="title" placeholder="프로젝트 제목을 입력하세요" required>
                    </div>

                    <div class="input-group">
                        <label for="projectStatus">프로젝트 상태:</label>
                        <select id="projectStatus" name="status" required>
                            <option value="진행 중">진행 중</option>
                            <option value="완료됨">완료됨</option>
                            <option value="대기 중">대기 중</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="projectDescription">상세 내용:</label>
                        <textarea id="projectDescription" name="description" placeholder="프로젝트에 대한 자세한 내용을 입력하세요" required></textarea>
                    </div>

                    <button type="submit">프로젝트 전송</button>
                </form>
            </section>

            <section id="sentItems" class="card">
                <h3>보낸 항목들</h3>
                <div id="itemsList">
                    <!-- 보낸 항목 목록 (최대 5개 표시) -->
                </div>
                <div id="pagination" class="pagination">
                    <!-- 페이지네이션 -->
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut, signInWithPopup, GoogleAuthProvider, GithubAuthProvider } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCtfK5Ruowyl9Yz6FdeRB_QoDKMOCor_k8",
    authDomain: "luxeret-login-porject.firebaseapp.com",
    projectId: "luxeret-login-porject",
    storageBucket: "luxeret-login-porject.firebasestorage.app",
    messagingSenderId: "482593560249",
    appId: "1:482593560249:web:936f2b13529866de462d68"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();
auth.languageCode = "ko"; // 한국어로 설정

// Firebase 인증 상태 변경 시 처리
onAuthStateChanged(auth, (user) => {
    if (user) {
        // 로그인된 경우
        const userName = user.displayName || "사용자";
        const loginTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit', second: '2-digit'});
        const userNameDisplay = document.getElementById("userNameDisplay");
        const loginTimeDisplay = document.getElementById("loginTime");

        userNameDisplay.textContent = `${userName}님`;
        loginTimeDisplay.textContent = `${loginTime}`;

        document.getElementById("logoutButton").style.display = "block";
    } else {
        // 로그인되지 않은 경우
        document.getElementById("userNameDisplay").textContent = "로그인되지 않음";
        document.getElementById("loginTime").textContent = "";
        document.getElementById("logoutButton").style.display = "none";
    }
});

// 로그아웃 버튼 클릭 시 처리
document.getElementById("logoutButton").addEventListener("click", () => {
    signOut(auth).then(() => {
        window.location.href = "https://luxeret.com";
    }).catch((error) => {
        console.error("로그아웃 실패:", error);
    });
});

// 구글 로그인 버튼 클릭 시 처리
document.getElementById("googleLogin").addEventListener("click", () => {
    signInWithPopup(auth, provider)
        .then((result) => {
            const user = result.user;
            console.log('로그인 성공:', user);
            window.location.href = "https://luxeret.com/";
        })
        .catch((error) => {
            console.error("로그인 실패:", error);
        });
});

// GitHub 로그인 버튼 클릭 시
document.getElementById("githubLogin").addEventListener("click", () => {
    const githubProvider = new GithubAuthProvider();
    signInWithPopup(auth, githubProvider)
        .then((result) => {
            const user = result.user;
            console.log('GitHub 로그인 성공:', user);
            window.location.href = "https://luxeret.com"; // 로그인 후 리다이렉트
        })
        .catch((error) => {
            console.error("GitHub 로그인 실패:", error);
        });
});
</script>
    <script src="script.js"></script>
</body>
</html>
